!function(e,t){"use strict";function n(){for(var e=arguments[0],t=1,n=arguments.length;n>t;t++){var s=arguments[t];for(var i in s)s.hasOwnProperty(i)&&(e[i]=s[i])}return e}function s(e){return e.scrollTop?e.scrollTop:e.pageYOffset}var i=function(){},o={typeview:"gridview",containerData:".gridview-content",actionbar:"generic-actionbar",selectorItem:".dato",selectedClass:".selected",inputSearch:"#txtSearch",buttonSearch:"#btnSearch",onSearch:i,onSelectItem:i,onSelectAll:i,onSelectClear:i,oneItemClick:i,onInitSelecting:i},r=13,c=function(e,s){this.container=e,"string"==typeof e&&(this.container=t.getElementById(e));var i=n({},o,s);this.settings=i,this.actionbar=i.actionbar,this.selectedClass=i.selectedClass,this.buttonSearch=t.querySelector(i.buttonSearch),this.inputSearch=t.querySelector(i.inputSearch),this.startTime,this.endTime,this.longpress=!1,this.isScroll=!1,this.timeoutScroll=null,this.delayScroll=200,this.current_page=1,this._attachDataListEvents()};c.prototype.getContainer=function(){return this.container},c.prototype._attachDataListEvents=function(){var e,t=this,n=t.container,s=t.settings.typeview,i=t.settings.selectorItem,o="undefined"!=typeof t.settings.withDefaultEvents?t.settings.withDefaultEvents:!0;if("checklist"==s&&(n.addClass("list-checkbox"),i+=' input[type="checkbox"]'),o){var c=function(e){var s=getParentsUntil(this,"#"+n.id,t.settings.selectorItem);s[0].toggleClass(t.selectedClass.substr(1));var i=n.find(t.selectedClass);"undefined"!=typeof i&&i.length>0?1==i.length&&t.showAppBar(!0,"edit"):t.showAppBar(!1,"edit")},a=function(e){e.preventDefault();var n=this,s=t.selectedClass.substr(1);t.container.hasClass("custom")?t.settings.oneItemClick(e):("touchend"==e.type&&(t.endTime=(new Date).getTime(),t.longpress=t.endTime-t.startTime<300?!1:!0),t.isScroll===!1&&(t.longpress?(t.showAppBar(!0,"edit"),t._setSelecting("true","some"),t._selectElement(n,s),t.settings.onInitSelecting(e)):"true"==t.container.getAttribute("data-multiselect")?t._selectElement(n,s):t.settings.oneItemClick(e)))};e="checklist"==s?c:a,this.container.on("click touchend",i,e),"gridview"==s&&(this.container.on("mousedown touchstart",i,function(e){t.startTime=(new Date).getTime()}),this.container.on("mouseup",i,function(e){t.endTime=(new Date).getTime(),t.longpress=t.endTime-t.startTime<300?!1:!0}))}else this.container.on("click touchend",i,function(e){t.settings.oneItemClick(e)});"undefined"!=typeof t.inputSearch&&(t.inputSearch.on("keydown",function(e){return e.keyCode==r?(t.current_page=1,t.settings.onSearch(),!1):void 0}),t.inputSearch.on("keypress",function(e){return e.keyCode==$.ui.keyCode.ENTER?!1:void 0})),"undefined"!=typeof t.buttonSearch&&t.buttonSearch.on("click",function(e){e.preventDefault(),t.showAppBar(!0,"search")})},c.prototype.listenerScroll=function(e,t){var n=this;n.isScroll=!0,clearTimeout(n.timeoutScroll),n.timeoutScroll=setTimeout(function(){n.isScroll=!1},n.delayScroll);var i=getStyle(e,"height");s(e)+Number(i.replace("px",""))>=e.scrollHeight&&n.settings.onSearch()},c.prototype._setSelecting=function(e,t){this.container.setAttribute("data-multiselect",e),this.container.setAttribute("data-selected",t)},c.prototype._selectElement=function(e,t){var n=e.querySelector('input[type="checkbox"]');if(e.hasClass(t)){e.removeClass(t),n.checked=!1;var s=this.container.getElementsByClassName(t);0==s.length?this.container.hasClass("custom")||(this.showAppBar(!1,"edit"),this._setSelecting("false","none"),this.settings.onInitSelecting()):s=this.container.getElementsByClassName(t)}else e.addClass(t),n.checked=!0},c.prototype._checkCheckList=function(e,t){var n=e.find('*input[type="checkbox"]');[].forEach.call(n,function(e){e.checked=t})},c.prototype.selectAll=function(e){var t=this.container.find(this.settings.selectorItem);"undefined"!=typeof t&&(this.showAppBar(!0,"edit"),this._setSelecting("true","all"),t.addClass(this.selectedClass.substr(1)),this._checkCheckList(this.container,!0),"undefined"!=typeof e&&e())},c.prototype.removeSelection=function(e){var t=this.container.find(this.selectedClass);"undefined"!=typeof t&&(t.removeClass(this.selectedClass.substr(1)),this._checkCheckList(this.container,!1),this.showAppBar(!1,"visible"),this._setSelecting("false","none"),"undefined"!=typeof e&&e())},c.prototype.currentPage=function(e){return"undefined"==typeof e?this.current_page:void(this.current_page=e)},c.prototype.showAppBar=function(e,n){if("undefined"!=typeof this.actionbar){var s=this.container,i=this.actionbar;"string"==typeof i&&(i=t.getElementById(this.actionbar)),null!=i?e?(i.removeClass("edit search").addClass("is-visible "+n),s.addClass(n),"search"==n?this.inputSearch.focus():s.addClass("prepare-multiselect")):(s.removeClass("prepare-multiselect "+n),i.removeClass("is-visible "+n)):e?s.addClass("prepare-multiselect"):s.removeClass("prepare-multiselect "+n)}},"function"==typeof define&&define.amd?define([],function(){return c}):"object"==typeof exports?module.exports=c:e.DataList=c}(window,document);