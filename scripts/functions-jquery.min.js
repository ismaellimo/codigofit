function getInternetExplorerVersion(){var e=-1;if("Microsoft Internet Explorer"==navigator.appName){var t=navigator.userAgent,n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=n.exec(t)&&(e=parseFloat(RegExp.$1))}return e}function isIE8orlower(){var e="0",t=getInternetExplorerVersion();return t>-1&&(e=t>=9?0:1),e}function precargaExp(e,t){t?$(e).append('<div class="preloaderbar" aria-busy="true" aria-label="Loading, please wait." role="progressbar"></div>'):$(e+" .preloaderbar").remove()}function precarga_OverLayer(e,t,n){if(t){var a="rgba(225,225,225,0.5)",i="Cargando...",o='<div class="bg-preloader-wrapper pos-rel full-size all-height"><div class="centered mdl-spinner mdl-js-spinner"></div></div>';"undefined"!=typeof n&&("undefined"!=typeof n.bg_color&&(a=n.bg_color),"undefined"!=typeof n.mensaje&&(i=n.mensaje),"undefined"!=typeof n.icono&&(o=n.icono)),$(e).append('<div class="preload" style="background-color: '+a+'"><div class="preload-wrapper">'+o+'<h2 class="title-preload white-text place-bottom align-center padding20">'+i+"</h2></div>")}else $(capa+" .preload").remove()}function setSelectOptions(e,t){$(e).find("option").each(function(){1==t?$(this).attr("selected","selected"):$(this).removeAttr("selected")})}function habilitarLink(e,t){t?$(e).hasClass("disabled")&&$(e).removeClass("disabled").attr("href",$(e).data("href")).removeAttr("disabled"):$(e).hasClass("disabled")||$(e).addClass("disabled").data("href",$(e).attr("href")).attr("href","javascript:void(0)").attr("disabled","disabled")}function habilitarControl(e,t){1==t?$(e).removeAttr("disabled"):$(e).attr("disabled","-1")}function enterTextArea(e,t){$(e).keyup(function(e){17==e.which&&(isCtrl=!1)}).keydown(function(e){if(17==e.which&&(isCtrl=!0),13==e.which&&1==isCtrl)return $(t).focus(),isCtrl=!1,!1})}function ConvertMySQLDate(e){var t=new String(e),n="",a="",i="",o="";return dateSlash=t.split("-"),a=dateSlash[0],i=dateSlash[1],dayIncoming=dateSlash[2],o=new String(dayIncoming).split(" "),o=o[0],n=o+"/"+i+"/"+a}function ConvertMySQLTime(e){var t=new String(e);return dateSpace=t.split(" "),strTime=dateSpace[1],strTime}function buscarItem(e,t){var n,a;for(n=0;n<e.length&&e[n]!=t;n++);return a=n<e.length?n:-1}function convertDate(e){function t(e){return e<10?"0"+e.toString():e.toString()}var n=new Date(e);return[t(n.getDate()),t(n.getMonth()+1),n.getFullYear()].join("/")}function getOnlyYearMonth(){function e(e){return e<10?"0"+e:e}var t=new Date;return[t.getFullYear(),e(t.getMonth()+1)].join("-")}function cargarDatePicker(e,t){$(e).datepicker({dateFormat:"dd/mm/yy",changeMonth:!0,changeYear:!0,showMonthAfterYear:!1,onSelect:t},$.datepicker.regional.es)}function cargarDatePicker_Restrict(e,t){$(e).datepicker({dateFormat:"dd/mm/yy",changeMonth:!0,minDate:0,maxDate:"+1",changeYear:!0,showMonthAfterYear:!1,onSelect:t},$.datepicker.regional.es)}function onlyNumbers(e){var t=e.which?e.which:e.keyCode;return!(46!=t&&t>31&&(t<48||t>57))}function MessageBox(e){var t="",n="",a="",i="undefined"==typeof e.idmodal?"modalMessageBox":e.idmodal,o=document.createElement("div");o.className="wrapper-buttons";var r=function(e,t,n,a){var o=document.createElement("button");return"undefined"!=typeof n&&o.setAttribute("id",n),o.setAttribute("type","button"),o.className="mdl-button mdl-js-button mdl-js-ripple-effect right "+t,o.innerHTML=e,o.addEventListener("click",function(e){e.preventDefault(),closeCustomModal("#"+i),"undefined"!=typeof a&&a(e)}),o},s=function(e,t){var n=0,a=isArray(t)?t:t.split("|"),i=a.length;if(e.innerHTML="",i>0)for(;n<i;){var o=t[n],s="undefined"!==o.primary&&o.primary,l=s?"mdl-button--primary":"",d="undefined"===o.content?"Aceptar":o.content,c=r(d,l,o.id,o.onClickButton);componentHandler.upgradeElement(c),e.appendChild(c),++n}},l=function(e){var t=r("Cancelar","mdl-button--primary","cancel_button",function(e){closeCustomModal("#"+i)});e.appendChild(t)};"undefined"==typeof e.title?a=" without-header":(n='<header class="modal-example-header">',n+='<h4 class="no-margin padding5"><strong>'+e.title+"</strong></h4>",n+="</header>");var d="undefined"==typeof e.width?"default":e.width,c="undefined"==typeof e.height?"default":e.height,u="";"auto"!=d&&"auto"!=c&&(u=' style="width: '+d+"; height: "+c+';"'),t='<div id="'+i+'" class="modal-example-content modal-dialog'+a+'"'+u+">",t+=n,t+='<main class="modal-example-body">',t+='<div class="modal-example-wrapper padding20">'+e.content+"</div>",t+="</main>",t+='<footer class="modal-example-footer"></footer>',t+="</div>";var p=document.getElementById(i);null!=p&&p.parentNode.removeChild(p),document.body.insertAdjacentHTML("beforeend",t);var f="undefined"!=typeof e.cancelButton&&e.cancelButton,m=document.getElementById(i),h=m.getElementsByClassName("modal-example-footer")[0];h.innerHTML="","undefined"!=typeof e.buttons&&s(o,e.buttons),f&&l(o),h.appendChild(o),openCustomModal("#"+i)}function prepareForm(e){$("input:checkbox, input:radio",e).each(function(){$(this).prop("initial",$(this).is(":checked"))})}function showErrorsInValidate(e,t){$.each(this.validElements(),function(e,t){var n=$(t);n.data("tooltip","").removeClass("error state tooltipped").tooltip("remove"),n.parent("div").removeClass("error-state")}),$.each(t,function(e,t){var n=$(t.element);n.tooltip("remove"),n.attr({"data-delay":"50","data-position":"bottom","data-tooltip":t.message}).addClass("error state tooltipped").tooltip(),n.parent("div").addClass("error-state")})}function LoadSubCategorias(e,t,n){$.ajax({type:"GET",url:"services/categorias/categorias-search.php",cache:!1,dataType:"json",data:"idref="+("0"==e?"1":e),success:function(e){var a=0,i=e.length,o="";if(i>0){for(;a<i;)o+='<option value="'+e[a].id+'">'+e[a].value+"</option>",++a;habilitarControl(t,!0),null!=n&&$(t).val(n).trigger("change")}else o='<option value="0">No hay sub-categor&iacute;as disponibles</option>';$(t).html(o).trigger("change")},error:function(e){console.log(e)}})}function ApplyValidNumbers(){$(".only-numbers").numeric(".")}function addLeadingZero(e){return e<10?"0"+e:""+e}function GetToday(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,a=e.getFullYear();return t<10&&(t="0"+t),n<10&&(n="0"+n),e=t+"/"+n+"/"+a}function GetCompleteDate(e,t,n){t-=1;var a=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];return addLeadingZero(e)+" de "+a[t]+" del aÃ±o "+n}function GetCompleteDate_default(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,a=e.getFullYear();return GetCompleteDate(t,n,a)}function padZero(e,t){for(var n=e+"";n.length<t;)n="0"+n;return n}function customReady(e){"loading"!=document.readyState?e():document.addEventListener("DOMContentLoaded",e)}function toggleSlideButton(e,t,n){var a="",i="";$(e).hasClass("active")?(a=n.icon_active,i=n.msje_active,$(e).removeClass("active"),$(t).slideUp()):(a=n.icon_deactive,i=n.msje_deactive,$(e).addClass("active"),$(t).slideDown()),$(e).find(".content img").attr("src",a),$(e).find(".content .text").html(i)}function toggleSlidePanel(e,t){0==t?$(e).is(":visible")&&($(".control-app",parent.document).removeClass("oculto"),$(e).hide("slide",{direction:"right"},400)):$(e).is(":visible")||($(".control-app",parent.document).addClass("oculto"),$(e).show("slide",{direction:"right"},400))}function ListarDetallePorArticulo(e){$.ajax({type:"GET",url:"services/atencion/detallearticulo-search.php",cache:!1,dataType:"json",data:{tipo:"1",idatencion:e},success:function(e){var t=0;t=e.length,t>0&&$(".contentPedido table tr").map(function(n,a){var i,o,r=0,s="";for(i=$(a),o=i.find(".categoria");r<t;)i.attr("data-iddetalle")==e[r].td_idatencion_articulo&&(s+='<span data-idelemgroup="'+e[r].tm_idproducto+'" class="elemgroup">'+e[r].tm_nombre+"</span>"),++r;o.prepend(s)})}})}function toggleOptions_v2(e,t){$(e).is(":visible")?($(e).hide("slide",{direction:t},400),$('.slider-overlay[data-referer="'+e+'"]').addClass("hide")):($(e).show("slide",{direction:t},400),$('.slider-overlay[data-referer="'+e+'"]').removeClass("hide"))}function toggleOptions(e,t){0==t?$(e).is(":visible")&&$(e).hide("slide",{direction:"left"},400):$(e).is(":visible")||$(e).show("slide",{direction:"left"},400)}function openModal(e){$(e+".custombox-modal").css({transition:"600ms","-webkit-transition":"600ms"}).addClass("custombox-slit").addClass("custombox-show").after('<div class="modal-example-overlay"></div>')}function closeModal(e){$(e+".custombox-modal").removeClass("custombox-slit").removeClass("custombox-show").removeAttr("style").nextAll(".modal-example-overlay").remove();var t=$("#form1").validate();"undefined"!=typeof t&&t.resetForm(),"undefined"!=typeof clearValidationsRules&&clearValidationsRules(e)}function openCustomModal(e){var t=0,n="";t=$(".modal-example-content:visible").zIndex(),$(e).fadeIn(250,function(){}),t>0&&$(e).zIndex(t+2),e=e.substring(1,e.length),t>0&&(n=' style="z-index: '+(t+1)+';"'),$("body").append('<div id="over'+e+'" class="modal-example-overlay"'+n+"></div>")}function closeCustomModal(e){var t="";if("string"!=typeof e){var n=getParentsUntil(e,!1,".modal-example-content");t="#"+n[0].getAttribute("id")}else t=e;$(t).fadeOut(250,function(){}),t=t.substring(1,t.length),$("#over"+t).remove();var a=$("#form1").validate();"undefined"!=typeof a&&a.resetForm(),"undefined"!=typeof clearValidationsRules&&clearValidationsRules(t)}function openModalCallBack(e,t){var n=0,a="";n=$(".modal-example-content:visible").zIndex(),$(e).fadeIn(250,function(){}),n>0&&$(e).zIndex(n+2),e=e.substring(1,e.length),n>0&&(a=' style="z-index: '+(n+1)+';"'),$("body").append('<div id="over'+e+'" class="modal-example-overlay"'+a+"></div>"),t()}function hideTopCharmOptions(){var e=$("#charmOptions",top.document);e.is(":visible")&&e.hide("slide",{direction:"right"},300)}function mostrarPanel(e,t){var n=$(e);n.fadeIn(1,function(){precargaExp(e,!0)}),frame=$("<iframe></iframe>").attr({scrolling:"no",marginwidth:"0",marginheight:"0",width:"100%",height:"100%",frameborder:"no",src:t}).load(function(){precargaExp(e,!1),$(this).contents().find("body, body *").on("click",function(e){hideTopCharmOptions()})}),n.html("").append(frame)}function setSpecialTab(e,t){$(e+".special-tab > .menu").on("click","li > a",function(n){var a="";n.preventDefault(),a=$(this).attr("href"),$(e+".special-tab > .menu li a.active").removeClass("active"),$(this).addClass("active"),$(e+" > .content > .paneltab").hide(),$(a).fadeIn("400",function(){t()})}).find("li:first-child a").addClass("active")}function habilitarDiv(e,t){t?$(e+" .panel-bloqueo").fadeOut(300):$(e+" .panel-bloqueo").fadeIn(300)}function startTime(){var e,n=0,a="";e=new Date,n=e.getMonth()+1,a=addLeadingZero(n),h=e.getHours(),m=e.getMinutes(),s=e.getSeconds(),m=addLeadingZero(m),s=addLeadingZero(s),document.getElementById("reloj").innerHTML=e.getDate()+"/"+a+"/"+e.getFullYear()+" "+h+":"+m+":"+s,t=setTimeout(startTime,500)}function BackToPrevPanel(){$(".inner-page:visible").fadeOut(400,function(){$(this).prev().fadeIn(400,function(){})})}function rgb2hex(e){return e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),"#"+hex(e[1])+hex(e[2])+hex(e[3])}function hex(e){var t=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");return isNaN(e)?"00":t[(e-e%16)/16]+t[e%16]}function getStyle(e,t){var n="";if(window.getComputedStyle)n=getComputedStyle(e).getPropertyValue(t);else if(e.currentStyle)try{n=e.currentStyle[t]}catch(a){console.log(a)}return n}function ajustarColumnas(e){$(e+" tbody tr").length>0&&$(e+" tbody tr:last td").each(function(t,n){var a,i=0;a=$(e+" thead th"),i=a.length,i>0&&$(a[t]).width($(n).width())})}function getParameterByName(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),n=t.exec(location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}function Interval(e,t){var n=!1;this.start=function(){this.isRunning()||(n=setInterval(e,t))},this.stop=function(){clearInterval(n),n=!1},this.isRunning=function(){return n!==!1}}function getDomainServer(){var e=window.location.origin,t=window.location.pathname,n=t.split("/"),a="";return a=n.length>1?"/"+n[1]:"",e+=a}function registerScriptMDL(e){var t=document.querySelectorAll(e),n=0,a=t.length;if(a>0)for(;n<a;){var i=t[n];componentHandler.upgradeElement(i),++n}}function ScaleImage(e,t,n,a,i){var o={width:0,height:0,fScaleToTargetWidth:!0};if(e<=0||t<=0||n<=0||a<=0)return o;var r=n,s=t*n/e,l=e*a/t,d=a,c=l>n;return c=c?i:!i,c?(o.width=Math.floor(r),o.height=Math.floor(s),o.fScaleToTargetWidth=!0):(o.width=Math.floor(l),o.height=Math.floor(d),o.fScaleToTargetWidth=!1),o.targetleft=Math.floor((n-o.width)/2),o.targettop=Math.floor((a-o.height)/2),o}function setSelect2(){$("select").addClass("selecttwo").select2()}function setDefaultSelection(e){var t="";t=0==$(e+" option:selected").length?e+" option:eq(0)":e+" option:selected",$(e).val($(t).val()).trigger("change")}function viewInExpandItem(e){var t=".page:visible .mdl-layout__header-row";$(".dato.expandable.is-expanded").removeClass("is-expanded"),$(".grouped-buttons").removeClass("fixed"),e.classList.add("is-expanded","expand-phone"),$(t).fadeOut(300)}function initDragDrop(e){var t,n,a="",i="selected",o=600;a="#"+$(e).attr("data-droparea"),$(e+" .dato").bind("mousedown mouseup",function(e){"mousedown"==e.type?t=e.timeStamp:(n=e.timeStamp-t,n<o&&$(this).toggleClass(i))}).draggable({revertDuration:10,containment:".page-region",start:function(e,t){t.helper.addClass(i),$(a).addClass("show")},stop:function(e,t){$("."+i).css({top:0,left:0}),$(a).removeClass("show")},drag:function(e,t){$("."+i).css({top:t.position.top,left:t.position.left})}}),$(a).droppable({drop:function(e,t){}})}function initMasonry(e,t,n){var a=document.querySelector(e);new Masonry(a,{columnWidth:t,itemSelector:n,percentPosition:!0})}function showOrHideCharmOptions(e,t){var n=document.querySelector(e),a=document.querySelector(".overlay-charm");0==t?n.classList.contains("is-visible")&&(n.classList.remove("is-visible"),a.style.display="none"):n.classList.contains(":visible")||(n.classList.add("is-visible"),a.style.display="block")}function showNotification(e,t,n){if(WebNotifications.areSupported()&&WebNotifications.currentPermission()===WebNotifications.permissions.granted){var a=WebNotifications["new"](e,t,"images/dish-icon.png",null,7e3);"undefined"!=typeof n.click?a.addEventListener("click",n.click):"undefined"!=typeof n.show?a.addEventListener("show",n.show):"undefined"!=typeof n.close&&a.addEventListener("close",n.close)}}function playNotifSound(){if(0==isIE8orlower()){var e=document.createElement("audio");e.setAttribute("src","sound/messagebox.mp3"),e.addEventListener("load",function(){e.play()},!0),e.pause(),e.play()}}function selectable(e,t){var n="",a=document.createElement("div");if(a.classList.add("gridview","selectable","no-padding","mdl-shadow--4dp","white","hide"),n+='<ul class="collection gridview-content no-margin no-border hide">',n+="</ul>",n+='<div class="empty-temp">',n+='<h4 class="padding20 grey-text text-darken-4">No se encontraron resultados</h4>',n+="</div>",a.innerHTML=n,"undefined"==typeof t.container)e.parentNode.appendChild(a);else{var i=document.getElementById(t.container);i.appendChild(a)}e.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation()}),e.addEventListener("focus",function(e){a.classList.remove("hide")});var o=1,r={criterio:e.value,pagina:o};"undefined"!=typeof t.data&&(r=$.extend(r,t.data)),e.addEventListener("keyup",function(e){a.classList.contains("hide")&&a.classList.remove("hide"),r.criterio=this.value,$.ajax({url:t.url,type:"GET",dataType:"json",data:r,success:t.successCallback,error:function(e){console.log(e)}})})}function ListarUbicacion(e,t,n,a){$.ajax({url:"services/ubigeo/ubigeo-search.php",type:"GET",dataType:"json",data:{tipobusqueda:"4",id:t},success:function(t){var i=0,o=0,r="",s="";if(o=t.length,o>0)for(;i<o;)"0"!=n&&(s=n==t[i].tm_idubigeo?' selected="selected"':""),r+='<option value="'+t[i].tm_idubigeo+'" data-referencia="'+t[i].tm_idubigeoref+'" '+s+">"+t[i].tm_nombre+"</option>",++i;else r='<option value="0" data-referencia="0">No hay regiones relacionadas</option>';$(e).html(r),"undefined"!=typeof a&&a()},error:function(e){console.log(e)}})}function emptyState_List(e){return'<div class="empty_state centered text-center"><img src="images/logo_empty.png" class="margin20" style="width: 120px; height: 120px;" alt="" /><p class="text-center white-text">'+e+'</p><a href="#" id="btnActualizar" class="mdl-button white mdl-button--colored mdl-js-button waves-effect">Actualizar</a></div>'}var isCtrl=!1,startTime,endTime,longpress=!1,isScroll=!1,timeoutScroll=null,delayScroll=200,paginaGeneral=1,isArray=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},inArray=function(e,t,n){return[].indexOf.call(t,e,n)};!function(e){e.fn.liveDraggable=function(t,n){return this.on("mouseover",n,function(){e(this).data("init")||e(this).data("init",!0).draggable(t)}),this}}(jQuery),function(e){e.fn.changeMaterialSelect=function(e){var t=this.parent().find(".mdl-selectfield__list-option-box"),n=t.find('li[data-option-value="'+e+'"]').text();return this.parent().find(".mdl-selectfield__box-value").text(n),this.val(e),this}}(jQuery),function(e){e.fn.imgLoad=function(t){return this.each(function(){t&&(this.complete||e(this).height()>0?t.apply(this):e(this).on("load",function(){t.apply(this)}))})}}(jQuery),String.prototype.repeat=function(e){return new Array(e+1).join(this)};var getParentsUntil=function(e,t,n){var a=[];if(t)var i=t.charAt(0);if(n)var o=n.charAt(0);for(;e&&e!==document;e=e.parentNode){if(t){if("."===i&&e.classList.contains(t.substr(1)))break;if("#"===i&&e.id===t.substr(1))break;if("["===i&&e.hasAttribute(t.substr(1,t.length-1)))break;if(e.tagName.toLowerCase()===t)break}n?("."===o&&e.classList.contains(n.substr(1))&&a.push(e),"#"===o&&e.id===n.substr(1)&&a.push(e),"["===o&&e.hasAttribute(n.substr(1,n.length-1))&&a.push(e),e.tagName.toLowerCase()===n&&a.push(e)):a.push(e)}return 0===a.length?null:a},Comet=function(e,t,n){this.timestamp=0,this.url=e,this.noerror=!0,this.connect=function(){var e=this,n=$.extend({timestamp:e.timestamp},t);$.ajax({type:"get",url:this.url,dataType:"json",data:n,success:function(t){e.timestamp=t.timestamp,e.handleResponse(t),e.noerror=!0},complete:function(t){e.noerror?e.connect():setTimeout(function(){comet.connect()},5e3),e.noerror=!1}})},this.disconnect=function(){},this.handleResponse=function(e){console.log(e),n(e)}};