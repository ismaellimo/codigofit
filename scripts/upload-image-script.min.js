function resetFoto(t){if("new"==t?hdFoto.value="no-set":hdFoto.value=imgFoto.getAttribute("data-src"),"initial"==imgFoto.getAttribute("data-update")&&"new"!=t){var e=!1;return MessageBox({content:"Â¿Desea quitar esta imagen?",width:"320px",height:"130px",buttons:[{primary:!0,content:"Eliminar",onClickButton:function(t){hdFoto.value="no-set",e=!0}}],cancelButton:!0}),e}imgFoto.src="",imgFoto.classList.add("hide"),imgFoto.setAttribute("data-src","none"),imgFoto.setAttribute("data-update","initial"),imgFoto.style.left=0,imgFoto.style.top=0,imgFoto.style.width="inherit",imgFoto.style.height="inherit",imgFoto.classList.remove("hide"),fileValue=!1,fileUploadImage.value="",btnResetImage.addClass("oculto")}function importFoto(t){var e=$(".modal-example-overlay"),o=e.find(".mdl-spinner"),a=["jpg","png","jpeg","gif"],i="",n="",l=new FileReader;return fileValue=t[0],n=fileValue.name,l.readAsDataURL(fileValue),i=n.split(".").pop().toLowerCase(),inArray(i,a)==-1?(bootbox.dialog({message:"El tipo de archivo no es compatible para la importaci&oacute;n",title:"Extensi&oacute;n no v&aacute;lida",onEscape:function(){},show:!0,backdrop:!0,closeButton:!0,animate:!0,buttons:{success:{label:"Ok",className:"btn-success",callback:function(){}}}}),!1):(e.removeClass("oculto"),o.addClass("active"),void(l.onload=function(t){setFoto(t.target.result,"update")}))}function setFoto(t,e){var o=new Image;o.src=t,o.onload=function(o){var a=$(".modal-example-overlay"),i=a.find(".mdl-spinner"),n=o.currentTarget,l=n.width,s=n.height,r=imgFoto.parentNode.offsetWidth,d=imgFoto.parentNode.offsetHeight,g=ScaleImage(l,s,r,d,!1);e="undefined"!=typeof e?e:"initial",imgFoto.src=n.src,imgFoto.setAttribute("data-update",e),imgFoto.style.left=g.targetleft+"px",imgFoto.style.top=g.targettop+"px",imgFoto.style.width=g.width+"px",imgFoto.style.height=g.height+"px",imgFoto.classList.remove("hide"),hdFoto.value=t,a.addClass("oculto"),i.addClass("active"),btnResetImage.removeClass("oculto")}}$(function(){fileUploadImage.on("dragenter",function(t){t.stopPropagation(),t.preventDefault()}),fileUploadImage.on("dragover",function(t){t.stopPropagation(),t.preventDefault()}),fileUploadImage.on("change",function(t){t.preventDefault(),importFoto(this.files)}),fileUploadImage.on("drop",function(t){t.preventDefault();var e=t.originalEvent.dataTransfer.files;importFoto(e)}),btnResetImage.on("click",function(t){t.preventDefault(),resetFoto("edit")})});var fileValue=!1,fileUploadImage=$("#fileUploadImage"),hdFoto=document.getElementById("hdFoto"),btnResetImage=$("#btnResetImage"),imgFoto=document.getElementById("imgFoto");