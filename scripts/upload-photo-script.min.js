function resetFoto(t){var e="";if("new"==t?hdFoto.value="no-set":hdFoto.value=imgFoto.getAttribute("data-src"),"initial"==imgFoto.getAttribute("data-update")&&"images/user-nosetimg-233.jpg"!=imgFoto.getAttribute("src")){if("new"!=t){var o=!1;return MessageBox({content:"Â¿Desea quitar esta imagen?",width:"320px",height:"130px",buttons:[{primary:!0,content:"Eliminar",onClickButton:function(t){e="images/user-nosetimg-233.jpg",hdFoto.value="no-set",o=!0}}],cancelButton:!0}),o}}else"initial"==imgFoto.getAttribute("data-update")&&(hdFoto.value="no-set");e="no-set"==hdFoto.value?"images/user-nosetimg-233.jpg":imgFoto.getAttribute("data-src"),setFoto(e),imgFoto.setAttribute("data-src",e),fileValue=!1,fileUploadImage.val(""),btnResetImage.addClass("hide")}function importFoto(t){var e=$(".imgoverlay"),o=e.find(".mdl-spinner"),a=["jpg","png","jpeg","gif"],i="",n="",s=new FileReader;return fileValue=t[0],n=fileValue.name,s.readAsDataURL(fileValue),i=n.split(".").pop().toLowerCase(),inArray(i,a)==-1?(bootbox.dialog({message:"El tipo de archivo no es compatible para la importaci&oacute;n",title:"Extensi&oacute;n no v&aacute;lida",onEscape:function(){},show:!0,backdrop:!0,closeButton:!0,animate:!0,buttons:{success:{label:"Ok",className:"btn-success",callback:function(){}}}}),!1):(e.removeClass("hide"),o.addClass("is-active"),void(s.onload=function(t){setFoto(t.target.result,"update")}))}function setFoto(t,e){var o=new Image;o.src=t,o.onload=function(o){var a=$(".imgoverlay"),i=a.find(".mdl-spinner"),n=o.currentTarget,s=n.width,l=n.height,r=imgFoto.parentNode.offsetWidth,g=imgFoto.parentNode.offsetHeight,d=ScaleImage(s,l,r,g,!1);e="undefined"!=typeof e?e:"initial",imgFoto.setAttribute("data-update",e),imgFoto.setAttribute("src",n.src),imgFoto.style.left=d.targetleft+"px",imgFoto.style.top=d.targettop+"px",imgFoto.style.width=d.width+"px",imgFoto.style.height=d.height+"px",hdFoto.value=t,a.addClass("hide"),i.removeClass("is-active"),"initial"!==e&&btnResetImage.removeClass("hide")}}$(function(){fileUploadImage.on("dragenter dragover",function(t){t.stopPropagation(),t.preventDefault()}),fileUploadImage.on("change",function(t){t.preventDefault(),importFoto(this.files)}),fileUploadImage.on("drop",function(t){t.preventDefault();var e=t.originalEvent.dataTransfer.files;importFoto(e)}),btnResetImage.on("click",function(t){t.preventDefault(),resetFoto("edit")})});var fileValue=!1,imgFoto=document.getElementById("imgFoto"),hdFoto=document.getElementById("hdFoto"),btnResetImage=$("#btnResetImage"),fileUploadImage=$("#fileUploadImage");