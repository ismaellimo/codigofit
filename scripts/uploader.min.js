function initUploader(){var e,n="";e=$("#upload ul"),n=getParameterByName("folder"),$("#upload").fileupload({formData:{folder:n},dropZone:$("#drop"),add:function(n,t){var a=$('<li class="working"><input type="text" value="0" data-width="48" data-height="48" data-fgColor="#0788a5" data-readOnly="1" data-bgColor="#3e4043" /><p></p><span></span></li>');a.find("p").text(t.files[0].name).append("<i>"+formatFileSize(t.files[0].size)+"</i>"),t.context=a.appendTo(e),a.find("input").knob(),a.find("span").click(function(){a.hasClass("working")&&i.abort(),a.fadeOut(function(){a.remove()})}),numberFiles+=1;var i=t.submit()},progress:function(e,n){var t=parseInt(n.loaded/n.total*100,10);n.context.find("input").val(t).change(),100==t&&n.context.removeClass("working")},fail:function(e,n){n.context.addClass("error")},done:function(e,t){numberFiles-=1,0==numberFiles&&window.parent.ListarArchivos(n)}})}function formatFileSize(e){return"number"!=typeof e?"":e>=1e9?(e/1e9).toFixed(2)+" GB":e>=1e6?(e/1e6).toFixed(2)+" MB":(e/1e3).toFixed(2)+" KB"}$(function(){initUploader(),$("#drop a").click(function(){$(this).parent().find("input").click()}),$(document).on("drop dragover",function(e){e.preventDefault()})});var numberFiles=0;